<?xml version="1.0"?>
<project name="Test_SingleScript">

    <taskdef name="testTask">

        <stringparams>
            <stringparam name="stringParam1" />
            <stringparam name="stringParam2" required="false" />
            <stringparam name="stringParam3" required="true" />
        </stringparams>

        <nodeparams>
            <nodeparam name="nodeParam1" />
            <nodeparam name="nodeParam2" required="false" />
            <nodeparam name="nodeParam3" required="true" />
        </nodeparams>

        <do>
            <property name="sp1Value" value="__stringParam1__" />
            <property name="sp2Value" value="__stringParam2__" />
            <property name="sp3Value" value="__stringParam3__" />
        </do>

    </taskdef>

    <property name="tmpPath" value="${path::get-temp-path()}" />
    <echo message="Using temporary folder ${tmpPath}" />

    <property name="sp1Value" value="" />
    <property name="sp2Value" value="" />
    <property name="sp3Value" value="" />

    <testTask   stringParam1="test1"
                stringParam2="test2"
                stringParam3="test3">

        <nodeParam1>
            <p1/>
        </nodeParam1>

        <nodeParam2>
            <p2/>
        </nodeParam2>

        <nodeParam3>
            <p3/>
        </nodeParam3>

    </testTask>

    <if test="${sp1Value != 'test1'}" >
        <fail message="sp1Value: expected 'test1' got '${sp1Value}'" />
    </if>

    <if test="${sp2Value != 'test2'}" >
        <fail message="sp2Value: expected 'test2' got '${sp2Value}'" />
    </if>

    <if test="${sp3Value != 'test3'}" >
        <fail message="sp3Value: expected 'test3' got '${sp3Value}'" />
    </if>

    <testTask   stringParam1="test1"
                stringParam3="test3">

        <nodeParam1>
            <p1/>
        </nodeParam1>

        <nodeParam3>
            <p3/>
        </nodeParam3>

    </testTask>

</project>
